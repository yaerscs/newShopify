{{ 'product-comparison.css' | asset_url | stylesheet_tag }}

{% comment %} Google Fonts for accent text customization {% endcomment %}
{% if section.settings.accent_font_family == 'Georgia Pro' or section.settings.accent_font_family == 'Bodoni Moda' %}
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  {% if section.settings.accent_font_family == 'Georgia Pro' %}
    <link href="https://fonts.googleapis.com/css2?family=Georgia+Pro:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&display=swap" rel="stylesheet">
  {% endif %}
  {% if section.settings.accent_font_family == 'Bodoni Moda' %}
    <link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:ital,opsz,wght@0,6..96,400;0,6..96,500;0,6..96,600;0,6..96,700;1,6..96,400;1,6..96,500;1,6..96,600;1,6..96,700&display=swap" rel="stylesheet">
  {% endif %}
{% endif %}

{{ 'product-comparison.js' | asset_url | defer | script_tag }}

<div
  class="comparison-section section-{{ section.id }}"
  style="background-color: {% if section.settings.use_theme_colors %}{{ settings.global_section_background_color }}{% else %}{{ section.settings.background_color }}{% endif %};"
>
  <div class="comparison-container">
    {% if section.settings.show_heading %}
      <div class="comparison-header">
        <h2 class="comparison-heading">
          <span
            class="title-part-1"
            style="color: {% if section.settings.use_theme_colors %}{{ settings.global_section_text_color }}{% else %}{{ section.settings.title_part_1_color }}{% endif %} !important;"
          >
            {{- section.settings.title_part_1 -}}
          </span>
          <span
            class="global-accent-text"
            style="color: {% if section.settings.use_theme_colors %}{{ settings.global_section_accent_1_color }}{% else %}{{ section.settings.title_part_2_color }}{% endif %} !important;"
          >
            {{- section.settings.title_part_2 -}}
          </span>
        </h2>
        {% if section.settings.subheading != blank %}
          <div
            class="comparison-subheading"
            style="color: {% if section.settings.use_theme_colors %}{{ settings.global_section_text_color }}{% else %}{{ section.settings.subheading_color }}{% endif %} !important;"
          >
            {{ section.settings.subheading }}
          </div>
        {% endif %}
      </div>
    {% endif %}

    <div class="table-wrapper">
      <table class="comparison-table">
        <!-- Header Row -->
        <thead>
          <tr class="table-header">
            <th class="feature-header"></th>
            {% for block in section.blocks %}
              {% if block.type == 'product_column' and forloop.index <= 2 %}
                <th
                  class="product-header column-{{ forloop.index }} {% if block.settings.highlight_column %}highlighted{% endif %}"
                  data-column="{{ forloop.index }}"
                >
                  {% if block.settings.product_image != blank %}
                    <div class="comparison-img-wrapper">
                      <img
                        src="{{ block.settings.product_image | img_url: '150x' }}"
                        alt="{{ block.settings.product_name }}"
                        class="comparison-img column-{{ forloop.index }}-img"
                        width="auto"
                        height="auto"
                        loading="lazy"
                      >
                    </div>
                  {% endif %}
                  <div
                    class="comparison-product-title"
                    style="color: {% if section.settings.use_theme_colors %}{% if block.settings.highlight_column %}{{ settings.global_section_background_color }}{% else %}{{ settings.global_section_text_color }}{% endif %}{% else %}{% if block.settings.highlight_column %}{{ section.settings.highlighted_text_color }}{% else %}{{ section.settings.unhighlighted_text_color }}{% endif %}{% endif %} !important;"
                  >
                    {{ block.settings.product_name }}
                  </div>
                  {% if block.settings.product_subtitle != blank %}
                    <div
                      class="product-subtitle {% if block.settings.use_subtitle_background != true %}no-background{% endif %}"
                      style="color: {% if section.settings.use_theme_colors %}{% if block.settings.highlight_column %}{{ settings.global_section_background_color }}{% else %}{{ settings.global_section_text_color }}{% endif %}{% else %}{% if block.settings.highlight_column %}{{ section.settings.highlighted_subtitle_color }}{% else %}{{ section.settings.unhighlighted_subtitle_color }}{% endif %}{% endif %} !important;"
                    >
                      {% if block.settings.show_subtitle_icon != false %}
                        {% if block.settings.subtitle_custom_icon != blank %}
                          <span class="subtitle-icon">{{ block.settings.subtitle_custom_icon }}</span>
                        {% else %}
                          {% if block.settings.highlight_column %}
                            <span class="subtitle-icon">
                              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" width="16" height="16" fill="currentColor"><path d="M225.86,102.82c-3.77-3.94-7.67-8-9.14-11.57-1.36-3.27-1.44-8.69-1.52-13.94-.15-9.76-.31-20.82-8-28.51s-18.75-7.85-28.51-8c-5.25-.08-10.67-.16-13.94-1.52-3.56-1.47-7.63-5.37-11.57-9.14C146.28,23.51,138.44,16,128,16s-18.27,7.51-25.18,14.14c-3.94,3.77-8,7.67-11.57,9.14C88,40.64,82.56,40.72,77.31,40.8c-9.76.15-20.82.31-28.51,8S41,67.55,40.8,77.31c-.08,5.25-.16,10.67-1.52,13.94-1.47,3.56-5.37,7.63-9.14,11.57C23.51,109.72,16,117.56,16,128s7.51,18.27,14.14,25.18c3.77,3.94,7.67,8,9.14,11.57,1.36,3.27,1.44,8.69,1.52,13.94.15,9.76.31,20.82,8,28.51s18.75,7.85,28.51,8c5.25.08,10.67.16,13.94,1.52,3.56,1.47,7.63,5.37,11.57,9.14C109.72,232.49,117.56,240,128,240s18.27-7.51,25.18-14.14c3.94-3.77,8-7.67,11.57-9.14,3.27-1.36,8.69-1.44,13.94-1.52,9.76-.15,20.82-.31,28.51-8s7.85-18.75,8-28.51c.08-5.25.16-10.67,1.52-13.94,1.47-3.56,5.37-7.63,9.14-11.57C232.49,146.28,240,138.44,240,128S232.49,109.73,225.86,102.82Zm-52.2,6.84-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35a8,8,0,0,1,11.32,11.32Z"/></svg>
                            </span>
                          {% endif %}
                        {% endif %}
                      {% endif %}
                      {{ block.settings.product_subtitle }}
                    </div>
                  {% endif %}
                </th>
              {% endif %}
            {% endfor %}
          </tr>
        </thead>

        <!-- Feature Rows -->
        <tbody>
          {% for block in section.blocks %}
            {% if block.type == 'feature_row' %}
              <tr class="feature-row">
                <td class="feature-cell">
                  <div class="feature-content">
                    {% if block.settings.show_icon %}
                      {% if block.settings.feature_image != blank %}
                        <div class="feature-icon">
                          <img
                            src="{{ block.settings.feature_image | img_url: '48x' }}"
                            alt="{{ block.settings.feature_name }}"
                            width="24"
                            height="24"
                          >
                        </div>
                      {% elsif block.settings.feature_icon != blank %}
                        <div class="feature-icon">{{ block.settings.feature_icon }}</div>
                      {% endif %}
                    {% endif %}
                    <div
                      class="feature-name"
                      style="color: {% if section.settings.use_theme_colors %}{{ settings.global_section_text_color }}{% else %}{{ section.settings.unhighlighted_text_color }}{% endif %} !important;"
                    >
                      {{ block.settings.feature_name }}
                    </div>
                  </div>
                </td>

                {% for i in (1..2) %}
                  {% assign value_setting = 'value_' | append: i %}
                  {% assign text_value_setting = 'text_value_' | append: i %}

                  {% comment %} Check if this column should be highlighted by finding the corresponding product_column block {% endcomment %}
                  {% assign column_highlighted = false %}
                  {% for product_block in section.blocks %}
                    {% if product_block.type == 'product_column' and forloop.index == i and product_block.settings.highlight_column %}
                      {% assign column_highlighted = true %}
                      {% break %}
                    {% endif %}
                  {% endfor %}

                  <td
                    class="value-cell column-{{ i }} {% if column_highlighted %}highlighted{% endif %}"
                    data-column="{{ i }}"
                  >
                    {% if block.settings.value_type == 'checkmark' %}
                      {% if block.settings[value_setting] == 'yes' %}
                        <span class="check-yes">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" width="24" height="24">
                            <rect width="256" height="256" fill="none"/><path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm45.66,85.66-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35a8,8,0,0,1,11.32,11.32Z" fill="currentColor"/>
                          </svg>
                        </span>
                      {% else %}
                        <span class="check-no">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" width="24" height="24">
                            <rect width="256" height="256" fill="none"/><path d="M128,24A104,104,0,1,0,232,128,104.12,104.12,0,0,0,128,24Zm36.44,132.88a8,8,0,0,1,0,11.31,8.17,8.17,0,0,1-11.31,0L128,143.31l-25.13,24.88a8.17,8.17,0,0,1-11.31,0,8,8,0,0,1,0-11.31L116.69,132,91.56,107.13a8,8,0,0,1,11.31-11.32L128,120.69l25.13-24.88a8,8,0,0,1,11.31,11.32L139.31,132Z" fill="currentColor"/>
                          </svg>
                        </span>
                      {% endif %}
                    {% else %}
                      {% assign is_highlighted_column = false %}
                      {% for product_block in section.blocks %}
                        {% if product_block.type == 'product_column' and product_block.settings.highlight_column and forloop.index == i %}
                          {% assign is_highlighted_column = true %}
                        {% endif %}
                      {% endfor %}
                      
                      <span
                        class="text-value"
                        style="color: {% if section.settings.use_theme_colors %}{% if is_highlighted_column %}{{ settings.global_section_background_color }}{% else %}{{ settings.global_section_text_color }}{% endif %}{% else %}{% if is_highlighted_column %}{{ section.settings.highlighted_check_color }}{% else %}{{ section.settings.unhighlighted_text_color }}{% endif %}{% endif %} !important; letter-spacing: var(--letter-spacing-body);"
                      >
                        {{- block.settings[text_value_setting] -}}
                      </span>
                    {% endif %}
                  </td>
                {% endfor %}
              </tr>
            {% endif %}
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<style>
  /* Dynamic styles that use Liquid variables */
  .section-{{ section.id }} {
    {% if section.settings.use_gradient_background and section.settings.use_theme_colors != true %}
      background: linear-gradient({{ section.settings.gradient_direction }}deg, {{ section.settings.gradient_color_1 }}, {{ section.settings.gradient_color_2 }});
    {% elsif section.settings.use_theme_colors != true %}
      background-color: {{ section.settings.background_color }};
    {% endif %}
    /* Theme color for background is handled by the div's inline style */
  }

  .section-{{ section.id }} .comparison-container {
    max-width: {{ section.settings.table_width }}px;
  }

  /* Text Colors - Conditional */
  {% if section.settings.use_theme_colors %}
    .section-{{ section.id }} .comparison-subheading,
    .section-{{ section.id }} .comparison-product-title,
    .section-{{ section.id }} .product-subtitle,
    .section-{{ section.id }} .feature-name,
    .section-{{ section.id }} .text-value {
      color: {{ settings.global_section_text_color }};
    }

    .section-{{ section.id }} .global-accent-text { /* Title Part 2 when theme colors are on */
      {% if section.settings.use_accent_gradient %}
        background: linear-gradient({{ section.settings.accent_gradient_angle }}deg, {{ section.settings.accent_gradient_start_color }} 0%, {{ section.settings.accent_gradient_end_color }} 100%) !important;
        -webkit-background-clip: text !important;
        -webkit-text-fill-color: transparent !important;
        background-clip: text !important;
        color: transparent !important;
      {% else %}
        color: {{ settings.global_section_accent_1_color }};
      {% endif %}
      font-weight: {{ section.settings.title_part_2_weight | default: settings.accent_text_weight }};
      font-style: {{ section.settings.title_part_2_style | default: settings.accent_text_style }};
      margin-left: {{ section.settings.accent_text_margin_left }}px;
      {% if section.settings.accent_font_family != 'inherit' %}
        {% if section.settings.accent_font_family == 'serif' %}
          font-family: serif !important;
        {% elsif section.settings.accent_font_family == 'Georgia Pro' %}
          font-family: 'Georgia Pro', Georgia, serif !important;
        {% elsif section.settings.accent_font_family == 'Bodoni Moda' %}
          font-family: 'Bodoni Moda', Georgia, serif !important;
        {% endif %}
      {% endif %}
      {% if section.settings.accent_font_style != 'inherit' %}
        font-style: {{ section.settings.accent_font_style }} !important;
      {% endif %}
      {% if section.settings.accent_font_weight != 'inherit' %}
        font-weight: {{ section.settings.accent_font_weight }} !important;
      {% endif %}
      padding-right: 4px !important;
      display: inline-block !important;
    }

    .section-{{ section.id }} .custom-accent-text {
      {% if section.settings.use_accent_gradient %}
        background: linear-gradient({{ section.settings.accent_gradient_angle }}deg, {{ section.settings.accent_gradient_start_color }} 0%, {{ section.settings.accent_gradient_end_color }} 100%) !important;
        -webkit-background-clip: text !important;
        -webkit-text-fill-color: transparent !important;
        background-clip: text !important;
        color: transparent !important;
      {% else %}
        color: {{ settings.global_section_accent_1_color }};
      {% endif %}
      margin-left: {{ section.settings.accent_text_margin_left }}px;
      {% if section.settings.accent_font_family != 'inherit' %}
        {% if section.settings.accent_font_family == 'serif' %}
          font-family: serif !important;
        {% elsif section.settings.accent_font_family == 'Georgia Pro' %}
          font-family: 'Georgia Pro', Georgia, serif !important;
        {% elsif section.settings.accent_font_family == 'Bodoni Moda' %}
          font-family: 'Bodoni Moda', Georgia, serif !important;
        {% endif %}
      {% endif %}
      {% if section.settings.accent_font_style != 'inherit' %}
        font-style: {{ section.settings.accent_font_style }} !important;
      {% endif %}
      {% if section.settings.accent_font_weight != 'inherit' %}
        font-weight: {{ section.settings.accent_font_weight }} !important;
      {% endif %}
    }

    .section-{{ section.id }} .feature-icon {
      color: {{ settings.global_section_accent_1_color }};
    }

    .section-{{ section.id }} .check-yes {
      color: {{ settings.global_section_accent_1_color }};
    }
    .section-{{ section.id }} .check-no {
      color: {{ settings.global_section_text_color }};
    }
    /* Highlighted column under theme colors */
    .section-{{ section.id }} .product-header.highlighted .comparison-product-title,
    .section-{{ section.id }} .product-header.highlighted .product-subtitle,
    .section-{{ section.id }} .value-cell.highlighted .text-value,
    .section-{{ section.id }} .value-cell.highlighted .check-yes,
    .section-{{ section.id }} .value-cell.highlighted .check-no {
      color: {{ settings.global_section_background_color }} !important; /* Important to override general text color */
    }

  {% else %} /* Custom Colors when use_theme_colors is false */

    .section-{{ section.id }} .global-accent-text { /* Title Part 2 with custom color */
      {% if section.settings.use_accent_gradient %}
        background: linear-gradient({{ section.settings.accent_gradient_angle }}deg, {{ section.settings.accent_gradient_start_color }} 0%, {{ section.settings.accent_gradient_end_color }} 100%) !important;
        -webkit-background-clip: text !important;
        -webkit-text-fill-color: transparent !important;
        background-clip: text !important;
        color: transparent !important;
      {% else %}
        color: {{ section.settings.title_part_2_color }};
      {% endif %}
      font-weight: {{ section.settings.title_part_2_weight | default: 'bold' }};
      font-style: {{ section.settings.title_part_2_style | default: 'normal' }};
      margin-left: {{ section.settings.accent_text_margin_left }}px;
      {% if section.settings.accent_font_family != 'inherit' %}
        {% if section.settings.accent_font_family == 'serif' %}
          font-family: serif !important;
        {% elsif section.settings.accent_font_family == 'Georgia Pro' %}
          font-family: 'Georgia Pro', Georgia, serif !important;
        {% elsif section.settings.accent_font_family == 'Bodoni Moda' %}
          font-family: 'Bodoni Moda', Georgia, serif !important;
        {% endif %}
      {% endif %}
      {% if section.settings.accent_font_style != 'inherit' %}
        font-style: {{ section.settings.accent_font_style }} !important;
      {% endif %}
      {% if section.settings.accent_font_weight != 'inherit' %}
        font-weight: {{ section.settings.accent_font_weight }} !important;
      {% endif %}
      padding-right: 4px !important;
      display: inline-block !important;
    }

    /* Enhanced specificity for custom accent text */
    .section-{{ section.id }} .custom-accent-text {
      {% if section.settings.use_accent_gradient %}
        background: linear-gradient({{ section.settings.accent_gradient_angle }}deg, {{ section.settings.accent_gradient_start_color }} 0%, {{ section.settings.accent_gradient_end_color }} 100%) !important;
        -webkit-background-clip: text !important;
        -webkit-text-fill-color: transparent !important;
        background-clip: text !important;
      {% else %}
        color: {% if section.settings.use_theme_colors %}{{ settings.global_section_accent_1_color }}{% else %}{{ section.settings.accent_color | default: settings.accent_text_color }}{% endif %} !important;
      {% endif %}
      {% if section.settings.accent_font_family != 'inherit' %}
        {% if section.settings.accent_font_family == 'serif' %}
          font-family: serif !important;
        {% elsif section.settings.accent_font_family == 'Georgia Pro' %}
          font-family: 'Georgia Pro', Georgia, serif !important;
        {% elsif section.settings.accent_font_family == 'Bodoni Moda' %}
          font-family: 'Bodoni Moda', Georgia, serif !important;
        {% endif %}
      {% endif %}
      {% if section.settings.accent_font_style != 'normal' %}
        font-style: {{ section.settings.accent_font_style }} !important;
      {% endif %}
      {% if section.settings.accent_font_weight != 'inherit' %}
        font-weight: {{ section.settings.accent_font_weight }} !important;
      {% endif %}
      padding-right: 4px !important;
      display: inline-block !important;
    }

    /* .section-{{ section.id }} .comparison-subheading {
      color: {{ section.settings.subheading_color }};
    } */

    /* Unhighlighted Product Column Text */
    /* .section-{{ section.id }} .product-header:not(.highlighted) .comparison-product-title {
      color: {{ section.settings.unhighlighted_text_color | default: section.settings.text_color }};
    }
    .section-{{ section.id }} .product-header:not(.highlighted) .product-subtitle {
      color: {{ section.settings.unhighlighted_subtitle_color | default: section.settings.subtitle_color }};
    } */

    /* Highlighted Product Column Text */
    /* .section-{{ section.id }} .product-header.highlighted .comparison-product-title {
      color: {{ section.settings.highlighted_text_color }} !important;
    }
    .section-{{ section.id }} .product-header.highlighted .product-subtitle {
      color: {{ section.settings.highlighted_subtitle_color }} !important;
    } */
    
    /* Feature Row - Feature Name (general, not column specific) */
    /* .section-{{ section.id }} .feature-name {
      color: {{ section.settings.unhighlighted_text_color | default: section.settings.text_color }}; /* Or a more general feature_name_color if added */
    } */

    /* Feature Row Icons (general, not column specific) */
    .section-{{ section.id }} .feature-icon {
      color: {{ section.settings.unhighlighted_icon_color | default: section.settings.icon_color }};
    }

    /* Feature Row Values - Unhighlighted Column */
    .section-{{ section.id }} .value-cell:not(.highlighted) .check-yes {
      color: {{ section.settings.unhighlighted_check_color | default: section.settings.check_color }};
    }
    .section-{{ section.id }} .value-cell:not(.highlighted) .check-no {
      color: {{ section.settings.unhighlighted_x_color | default: section.settings.x_color }};
    }

    /* Feature Row Values - Highlighted Column */
    .section-{{ section.id }} .value-cell.highlighted .check-yes {
      color: {{ section.settings.highlighted_check_color }} !important;
    }
    .section-{{ section.id }} .value-cell.highlighted .check-no {
      color: {{ section.settings.highlighted_x_color }} !important;
    }

  {% endif %}

  /* General Sizing - Not color dependent */
  .section-{{ section.id }} .comparison-heading {
    font-size: {{ section.settings.heading_size }}px;
  }

  .section-{{ section.id }} .comparison-subheading {
    font-size: {{ section.settings.subheading_size }}px;
  }

  .section-{{ section.id }} .comparison-product-title {
    font-size: {{ section.settings.product_title_size }}px;
  }

  .section-{{ section.id }} .product-subtitle {
    font-size: {{ section.settings.subtitle_size }}px;
  }

  .section-{{ section.id }} .feature-name {
    font-size: {{ section.settings.feature_name_size }}px;
  }

  .section-{{ section.id }} .text-value {
    font-size: {{ section.settings.text_value_size }}px;
    letter-spacing: var(--letter-spacing-body);
  }

  /* Borders and Highlight Background - Mostly independent of text color logic but uses theme colors for BG */
  .section-{{ section.id }} .table-header th,
  .section-{{ section.id }} .feature-row td {
    border-bottom: 1px solid {% if section.settings.use_theme_colors %}{{ settings.global_section_text_color | color_modify: 'alpha', 0.15 }}{% else %}{{ section.settings.border_color }}{% endif %};
  }

  .section-{{ section.id }} .product-header.highlighted:before,
  .section-{{ section.id }} .value-cell.highlighted:before {
    {% if section.settings.use_highlight_border %}
      border: {{ section.settings.highlight_border_width }}px solid {{ section.settings.highlight_border_color }};
    {% endif %}
    {% if section.settings.use_theme_colors %}
      background-color: {{ settings.global_section_accent_1_color }};
    {% else %}
      {% for block in section.blocks %}
        {% if block.type == 'product_column' and block.settings.highlight_column %}
          {% if block.settings.use_highlight_gradient %}
            background: linear-gradient({{ block.settings.highlight_gradient_angle }}deg, {{ block.settings.highlight_gradient_start_color }} 0%, {{ block.settings.highlight_gradient_end_color }} 100%);
          {% else %}
            background-color: {{ block.settings.highlight_color }};
          {% endif %}
        {% endif %}
      {% endfor %}
    {% endif %}
  }

  /* Border radius for highlighted column */
  .section-{{ section.id }} .product-header.highlighted:before {
    border-radius: {{ section.settings.highlight_border_radius }}px {{ section.settings.highlight_border_radius }}px 0 0;
  }

  .section-{{ section.id }} tr:last-child .value-cell.highlighted:before {
    border-radius: 0 0 {{ section.settings.highlight_border_radius }}px {{ section.settings.highlight_border_radius }}px;
  }

  .section-{{ section.id }} .product-header.highlighted:after { /* Assuming :after is used for overlay or similar, ensure radius matches */
    border-radius: {{ section.settings.highlight_border_radius }}px {{ section.settings.highlight_border_radius }}px 0 0;
  }

  .section-{{ section.id }} tr:last-child .value-cell.highlighted:after {
    border-radius: 0 0 {{ section.settings.highlight_border_radius }}px {{ section.settings.highlight_border_radius }}px;
  }

  /* Column-specific styles - These may have their own color logic */
  {% for block in section.blocks %}
    {% if block.type == 'product_column' %}
      .section-{{ section.id }} .column-{{ forloop.index }}-img {
        max-height: {{ block.settings.product_image_size | default: 80 }}px;
      }
      
      .section-{{ section.id }} .column-{{ forloop.index }} .subtitle-icon {
        {% comment %} Conditional icon color based on column and theme settings {% endcomment %}
        {% if section.settings.use_theme_colors %}
          color: {% if block.settings.highlight_column %}{{ settings.global_section_background_color }}{% else %}{{ settings.global_section_text_color }}{% endif %} !important;
        {% else %}
          color: {% if block.settings.highlight_column %}{{ section.settings.highlighted_subtitle_color }}{% else %}{{ section.settings.unhighlighted_subtitle_color | default: section.settings.subtitle_color }}{% endif %} !important;
        {% endif %}
      }
      
      .section-{{ section.id }} .column-{{ forloop.index }} .product-subtitle {
        {% if block.settings.use_subtitle_background != false %}
          background: {% if block.settings.subtitle_glass_color != blank %}{{ block.settings.subtitle_glass_color | color_modify: 'alpha', 0.2 }}{% else %}rgba(255, 255, 255, 0.2){% endif %};
          border: 1px solid {% if block.settings.subtitle_border_color != blank %}{{ block.settings.subtitle_border_color | color_modify: 'alpha', 0.3 }}{% else %}{% if block.settings.subtitle_glass_color != blank %}{{ block.settings.subtitle_glass_color | color_modify: 'alpha', 0.3 }}{% else %}rgba(255, 255, 255, 0.3){% endif %}{% endif %};
        {% endif %}
      }
    {% endif %}
  {% endfor %}

  /* Mobile text sizes - These use !important, so they will override previous font-size rules */
  @media (max-width: 767px) {
    .section-{{ section.id }} .comparison-product-title {
      font-size: {{ section.settings.product_title_size_mobile }}px !important;
    }
    
    .section-{{ section.id }} .product-subtitle {
      font-size: {{ section.settings.subtitle_size_mobile }}px !important;
    }
    
    .section-{{ section.id }} .feature-name {
      font-size: {{ section.settings.feature_name_size_mobile }}px !important;
    }
    
    .section-{{ section.id }} .text-value {
      font-size: {{ section.settings.text_value_size_mobile }}px !important;
    }
    
    /* Column-specific mobile image sizes */
    {% for block in section.blocks %}
      {% if block.type == 'product_column' %}
        .section-{{ section.id }} .column-{{ forloop.index }}-img {
          max-height: {{ block.settings.product_image_size_mobile | default: 50 }}px;
        }
      {% endif %}
    {% endfor %}
  }

  /* Tablet-specific styles */
  @media (max-width: 991px) {
    /* Column-specific tablet image sizes */
    {% for block in section.blocks %}
      {% if block.type == 'product_column' %}
        .section-{{ section.id }} .column-{{ forloop.index }}-img {
          max-height: {{ block.settings.product_image_size_tablet | default: 60 }}px;
        }
      {% endif %}
    {% endfor %}
  }

  /* Enhanced specificity for global accent text */
  .custom-comparison-section .global-accent-text,
  .custom-comparison-section-wrapper .global-accent-text {
    {% if section.settings.override_global_accent %}
      {% if section.settings.use_accent_gradient %}
        background: linear-gradient({{ section.settings.accent_gradient_angle }}deg, {{ section.settings.accent_gradient_start_color }} 0%, {{ section.settings.accent_gradient_end_color }} 100%) !important;
        -webkit-background-clip: text !important;
        -webkit-text-fill-color: transparent !important;
        background-clip: text !important;
      {% else %}
        color: {% if section.settings.use_theme_colors %}{{ settings.global_section_accent_1_color }}{% else %}{{ section.settings.accent_color | default: settings.accent_text_color }}{% endif %} !important;
      {% endif %}
    {% else %}
      color: {{ settings.global_section_accent_1_color }} !important;
    {% endif %}
    {% if section.settings.accent_font_family != 'inherit' %}
      {% if section.settings.accent_font_family == 'serif' %}
        font-family: serif !important;
      {% elsif section.settings.accent_font_family == 'Georgia Pro' %}
        font-family: 'Georgia Pro', Georgia, serif !important;
      {% elsif section.settings.accent_font_family == 'Bodoni Moda' %}
        font-family: 'Bodoni Moda', Georgia, serif !important;
      {% endif %}
    {% endif %}
    {% if section.settings.accent_font_style != 'normal' %}
      font-style: {{ section.settings.accent_font_style }} !important;
    {% endif %}
    {% if section.settings.accent_font_weight != 'inherit' %}
      font-weight: {{ section.settings.accent_font_weight }} !important;
    {% endif %}
    padding-right: 4px !important;
    display: inline-block !important;
  }
</style>

{% schema %}
{
  "name": "Product Comparison",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "checkbox",
      "id": "use_theme_colors",
      "label": "Use Theme Colors",
      "default": true
    },
    {
      "type": "header",
      "content": "Heading & Subheading"
    },
    {
      "type": "checkbox",
      "id": "show_heading",
      "label": "Show Heading & Subheading",
      "default": true
    },
    {
      "type": "text",
      "id": "title_part_1",
      "label": "Title Text Part 1",
      "default": "Us Vs."
    },
    {
      "type": "text",
      "id": "title_part_2",
      "label": "Title Text Part 2",
      "default": "Them"
    },
    {
      "type": "color",
      "id": "title_part_1_color",
      "label": "Title Part 1 Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "title_part_2_color",
      "label": "Title Part 2 Color",
      "default": "#EF4A65"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Here's why we're the industry leader"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 20,
      "max": 60,
      "step": 2,
      "default": 32,
      "label": "Heading Size"
    },
    {
      "type": "range",
      "id": "subheading_size",
      "min": 10,
      "max": 24,
      "step": 1,
      "default": 16,
      "label": "Subheading Size"
    },
    {
      "type": "color",
      "id": "subheading_color",
      "label": "Subheading Color",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Accent Text Settings"
    },
    {
      "type": "range",
      "id": "accent_text_margin_left",
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px",
      "label": "Accent Text Left Margin",
      "default": 0
    },
    {
      "type": "checkbox",
      "id": "use_accent_gradient",
      "label": "Use Accent Gradient",
      "default": false,
      "info": "Apply gradient effect to the accent text"
    },
    {
      "type": "color",
      "id": "accent_gradient_start_color",
      "label": "Accent Gradient Start Color",
      "default": "#EF4A65"
    },
    {
      "type": "color",
      "id": "accent_gradient_end_color",
      "label": "Accent Gradient End Color",
      "default": "#FF6B9D"
    },
    {
      "type": "range",
      "id": "accent_gradient_angle",
      "min": 0,
      "max": 360,
      "step": 5,
      "unit": "deg",
      "label": "Accent Gradient Angle",
      "default": 45
    },
    {
      "type": "select",
      "id": "accent_font_family",
      "label": "Accent Text Font Family",
      "options": [
        {
          "value": "inherit",
          "label": "Default (Inherit)"
        },
        {
          "value": "serif",
          "label": "Serif"
        },
        {
          "value": "Georgia Pro",
          "label": "Georgia Pro"
        },
        {
          "value": "Bodoni Moda",
          "label": "Bodoni Moda"
        }
      ],
      "default": "inherit",
      "info": "Choose a custom font family for the accent text"
    },
    {
      "type": "select",
      "id": "accent_font_style",
      "label": "Accent Text Font Style",
      "options": [
        {
          "value": "normal",
          "label": "Normal"
        },
        {
          "value": "italic",
          "label": "Italic"
        }
      ],
      "default": "normal",
      "info": "Choose the font style for the accent text"
    },
    {
      "type": "select",
      "id": "accent_font_weight",
      "label": "Accent Text Font Weight",
      "options": [
        {
          "value": "inherit",
          "label": "Default (Inherit)"
        },
        {
          "value": "300",
          "label": "Light (300)"
        },
        {
          "value": "400",
          "label": "Normal (400)"
        },
        {
          "value": "500",
          "label": "Medium (500)"
        },
        {
          "value": "600",
          "label": "Semi Bold (600)"
        },
        {
          "value": "700",
          "label": "Bold (700)"
        },
        {
          "value": "800",
          "label": "Extra Bold (800)"
        },
        {
          "value": "900",
          "label": "Black (900)"
        }
      ],
      "default": "inherit",
      "info": "Choose the font weight (boldness) for the accent text"
    },
    {
      "type": "header",
      "content": "Text Sizing (Desktop)"
    },
    {
      "type": "range",
      "id": "product_title_size",
      "min": 14,
      "max": 36,
      "step": 1,
      "default": 21,
      "label": "Product Title Size - Desktop (px)"
    },
    {
      "type": "range",
      "id": "subtitle_size",
      "min": 10,
      "max": 18,
      "step": 1,
      "default": 12,
      "label": "Product Subtitle Size - Desktop (px)"
    },
    {
      "type": "range",
      "id": "feature_name_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "default": 16,
      "label": "Feature Name Size - Desktop (px)"
    },
    {
      "type": "range",
      "id": "text_value_size",
      "min": 12,
      "max": 22,
      "step": 1,
      "default": 14,
      "label": "Text Value Size - Desktop (px)"
    },
    {
      "type": "header",
      "content": "Text Sizing (Mobile)"
    },
    {
      "type": "range",
      "id": "product_title_size_mobile",
      "min": 12,
      "max": 24,
      "step": 1,
      "default": 16,
      "label": "Product Title Size - Mobile (px)"
    },
    {
      "type": "range",
      "id": "subtitle_size_mobile",
      "min": 8,
      "max": 16,
      "step": 1,
      "default": 10,
      "label": "Product Subtitle Size - Mobile (px)"
    },
    {
      "type": "range",
      "id": "feature_name_size_mobile",
      "min": 10,
      "max": 20,
      "step": 1,
      "default": 12,
      "label": "Feature Name Size - Mobile (px)"
    },
    {
      "type": "range",
      "id": "text_value_size_mobile",
      "min": 10,
      "max": 18,
      "step": 1,
      "default": 11,
      "label": "Text Value Size - Mobile (px)"
    },
    {
      "type": "header",
      "content": "Colors & Background"
    },
    {
      "type": "checkbox",
      "id": "use_gradient_background",
      "label": "Use Gradient Background",
      "default": false
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#FFFFFF"
    },
    {
      "type": "range",
      "id": "gradient_direction",
      "min": 0,
      "max": 360,
      "step": 5,
      "default": 90,
      "label": "Gradient Direction",
      "info": "Angle in degrees"
    },
    {
      "type": "color",
      "id": "gradient_color_1",
      "label": "Gradient Color 1",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "gradient_color_2",
      "label": "Gradient Color 2",
      "default": "#F5F5F5"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Default Text Color (Fallback for Unhighlighted)",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "subtitle_color",
      "label": "Default Subtitle Color (Fallback for Unhighlighted)",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Highlighted Column Settings"
    },
    {
      "type": "color",
      "id": "highlighted_text_color",
      "label": "Highlighted Text Color",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "highlighted_subtitle_color",
      "label": "Highlighted Subtitle Color",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "highlighted_check_color",
      "label": "Highlighted Checkmark Color",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "highlighted_x_color",
      "label": "Highlighted X Mark Color",
      "default": "#FFFFFF"
    },
    {
      "type": "header",
      "content": "Regular Column Settings"
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border Color",
      "default": "#EEEEEE"
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "Default Feature Icon Color (Fallback for Unhighlighted)",
      "default": "#EF4A65"
    },
    {
      "type": "color",
      "id": "check_color",
      "label": "Default Checkmark Color (Fallback for Unhighlighted)",
      "default": "#EF4A65"
    },
    {
      "type": "color",
      "id": "x_color",
      "label": "Default X Mark Color (Fallback for Unhighlighted)",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "highlight_border_radius",
      "min": 0,
      "max": 20,
      "step": 2,
      "default": 8,
      "label": "Border Radius for Highlight"
    },
    {
      "type": "header",
      "content": "Highlighted Column Border Settings"
    },
    {
      "type": "checkbox",
      "id": "use_highlight_border",
      "label": "Use Highlight Border",
      "default": false,
      "info": "Add a border around the highlighted column"
    },
    {
      "type": "color",
      "id": "highlight_border_color",
      "label": "Highlight Border Color",
      "default": "#71e293"
    },
    {
      "type": "range",
      "id": "highlight_border_width",
      "min": 1,
      "max": 5,
      "step": 1,
      "unit": "px",
      "default": 1,
      "label": "Highlight Border Width"
    },
    {
      "type": "header",
      "content": "Unhighlighted Column Colors"
    },
    {
      "type": "color",
      "id": "unhighlighted_text_color",
      "label": "Unhighlighted Column - Text Color",
      "default": "#000000",
      "info": "Color for general text in unhighlighted columns if not using theme colors."
    },
    {
      "type": "color",
      "id": "unhighlighted_subtitle_color",
      "label": "Unhighlighted Column - Subtitle Color",
      "default": "#000000",
      "info": "Color for product subtitles in unhighlighted columns if not using theme colors."
    },
    {
      "type": "color",
      "id": "unhighlighted_icon_color",
      "label": "Unhighlighted Column - Feature Icon Color",
      "default": "#EF4A65",
      "info": "Color for feature icons in unhighlighted rows/columns if not using theme colors."
    },
    {
      "type": "color",
      "id": "unhighlighted_check_color",
      "label": "Unhighlighted Column - Checkmark Color",
      "default": "#EF4A65",
      "info": "Color for 'Yes' checkmarks in unhighlighted columns if not using theme colors."
    },
    {
      "type": "color",
      "id": "unhighlighted_x_color",
      "label": "Unhighlighted Column - X Mark Color",
      "default": "#000000",
      "info": "Color for 'No' X marks in unhighlighted columns if not using theme colors."
    }
  ],
  "blocks": [
    {
      "type": "product_column",
      "name": "Product Column",
      "limit": 3,
      "settings": [
        {
          "type": "text",
          "id": "product_name",
          "label": "Product Name",
          "default": "Your Product"
        },
        {
          "type": "text",
          "id": "product_subtitle",
          "label": "Product Subtitle",
          "default": "Premium"
        },
        {
          "type": "image_picker",
          "id": "product_image",
          "label": "Product Image",
          "info": "Optional image to display above the product title"
        },
        {
          "type": "range",
          "id": "product_image_size",
          "min": 40,
          "max": 200,
          "step": 10,
          "default": 80,
          "label": "Image Size - Desktop (px)",
          "info": "Maximum height of product image in desktop view"
        },
        {
          "type": "range",
          "id": "product_image_size_tablet",
          "min": 30,
          "max": 150,
          "step": 10,
          "default": 60,
          "label": "Image Size - Tablet (px)",
          "info": "Maximum height of product image in tablet view"
        },
        {
          "type": "range",
          "id": "product_image_size_mobile",
          "min": 30,
          "max": 100,
          "step": 5,
          "default": 50,
          "label": "Image Size - Mobile (px)",
          "info": "Maximum height of product image in mobile view"
        },
        {
          "type": "html",
          "id": "subtitle_custom_icon",
          "label": "Custom Subtitle Icon (SVG)",
          "info": "Paste SVG code here to replace the default icon"
        },
        {
          "type": "checkbox",
          "id": "show_subtitle_icon",
          "label": "Show Subtitle Icon",
          "default": true,
          "info": "Toggle to show or hide the icon in the product subtitle"
        },
        {
          "type": "checkbox",
          "id": "use_subtitle_background",
          "label": "Use Subtitle Background",
          "default": true,
          "info": "Toggle to enable or disable the glass background effect"
        },
        {
          "type": "color",
          "id": "subtitle_border_color",
          "label": "Subtitle Border Color",
          "default": "#FFFFFF",
          "info": "Border color for the glass effect (will be applied with transparency)"
        },
        {
          "type": "checkbox",
          "id": "highlight_column",
          "label": "Highlight This Column",
          "default": true
        },
        {
          "type": "color",
          "id": "highlight_color",
          "label": "Highlight Color",
          "default": "#EF4A65"
        },
        {
          "type": "checkbox",
          "id": "use_highlight_gradient",
          "label": "Use Highlight Gradient",
          "default": false,
          "info": "Apply gradient effect to the highlighted column background"
        },
        {
          "type": "color",
          "id": "highlight_gradient_start_color",
          "label": "Highlight Gradient Start Color",
          "default": "#EF4A65"
        },
        {
          "type": "color",
          "id": "highlight_gradient_end_color",
          "label": "Highlight Gradient End Color",
          "default": "#FF6B9D"
        },
        {
          "type": "range",
          "id": "highlight_gradient_angle",
          "min": 0,
          "max": 360,
          "step": 5,
          "unit": "deg",
          "label": "Highlight Gradient Angle",
          "default": 45
        },
        {
          "type": "color",
          "id": "subtitle_glass_color",
          "label": "Subtitle Glass Background",
          "default": "#FFFFFF",
          "info": "This color will be used with transparency for the glass effect"
        },
        {
          "type": "color",
          "id": "subtitle_icon_color",
          "label": "Subtitle Icon Color",
          "default": "#000000",
          "info": "Color for the icon in this column's subtitle"
        }
      ]
    },
    {
      "type": "feature_row",
      "name": "Feature Row",
      "settings": [
        {
          "type": "text",
          "id": "feature_name",
          "label": "Feature Name",
          "default": "Feature"
        },
        {
          "type": "checkbox",
          "id": "show_icon",
          "label": "Show Icon",
          "default": true,
          "info": "Toggle to show or hide the feature icon"
        },
        {
          "type": "image_picker",
          "id": "feature_image",
          "label": "Feature Image",
          "info": "Alternative to using SVG code. Will be used instead of SVG if provided."
        },
        {
          "type": "html",
          "id": "feature_icon",
          "label": "Feature Icon (SVG)",
          "default": "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='10'></circle><path d='M12 8v8'></path><path d='M8 12h8'></path></svg>",
          "info": "To ensure your custom SVG icon adopts the theme color settings, include 'stroke=\"currentColor\"' and/or 'fill=\"currentColor\"' attributes in your SVG code. This will make your icon automatically match the icon color setting."
        },
        {
          "type": "select",
          "id": "value_type",
          "label": "Value Type",
          "options": [
            {
              "value": "checkmark",
              "label": "Checkmark/X"
            },
            {
              "value": "text",
              "label": "Text"
            }
          ],
          "default": "checkmark"
        },
        {
          "type": "select",
          "id": "value_1",
          "label": "Column 1 Value",
          "options": [
            {
              "value": "yes",
              "label": "Yes"
            },
            {
              "value": "no",
              "label": "No"
            }
          ],
          "default": "yes"
        },
        {
          "type": "text",
          "id": "text_value_1",
          "label": "Column 1 Text Value",
          "default": "Yes",
          "info": "Used when Value Type is Text"
        },
        {
          "type": "select",
          "id": "value_2",
          "label": "Column 2 Value",
          "options": [
            {
              "value": "yes",
              "label": "Yes"
            },
            {
              "value": "no",
              "label": "No"
            }
          ],
          "default": "no"
        },
        {
          "type": "text",
          "id": "text_value_2",
          "label": "Column 2 Text Value",
          "default": "No",
          "info": "Used when Value Type is Text"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Product Comparison",
      "blocks": [
        {
          "type": "product_column",
          "settings": {
            "product_name": "Our Product",
            "product_subtitle": "Original",
            "highlight_column": true,
            "highlight_color": "#EF4A65"
          }
        },
        {
          "type": "product_column",
          "settings": {
            "product_name": "Others",
            "product_subtitle": "Knock-off",
            "highlight_column": false,
            "subtitle_custom_icon": "<svg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='currentColor'><path d='M22 15h-3V3h3a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1h3v12H7a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1h5.09l-.58 3.33a1 1 0 0 0 1 1.17h1a1 1 0 0 0 .95-.8l1.03-5.7H22a1 1 0 0 0 1-1v-1a1 1 0 0 0-1-1z' transform='rotate(180, 12, 12)'/></svg>"
          }
        },
        {
          "type": "feature_row",
          "settings": {
            "feature_name": "Core feature",
            "feature_icon": "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='10'></circle><path d='M12 8v8'></path><path d='M8 12h8'></path></svg>",
            "value_1": "yes",
            "value_2": "yes"
          }
        },
        {
          "type": "feature_row",
          "settings": {
            "feature_name": "Advanced feature",
            "feature_icon": "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polygon points='12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2'></polygon></svg>",
            "value_1": "yes",
            "value_2": "no"
          }
        },
        {
          "type": "feature_row",
          "settings": {
            "feature_name": "Premium feature",
            "feature_icon": "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5'></path></svg>",
            "value_type": "text",
            "text_value_1": "Yes",
            "text_value_2": "No"
          }
        }
      ]
    }
  ]
}
{% endschema %}
