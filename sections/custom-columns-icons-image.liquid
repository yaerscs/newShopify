{%- style -%}
  .cci-{{ section.id }} {
    background: linear-gradient(to bottom, {{ section.settings.bg_color_top }} 0%, {{ section.settings.bg_color_bottom }} 100%);
    color: {{ section.settings.text_color }};
    padding-top: {{ section.settings.padding_top_mobile }}px;
    padding-bottom: {{ section.settings.padding_bottom_mobile }}px;
  }

  @media screen and (min-width: 750px) {
    .cci-{{ section.id }} {
      padding-top: {{ section.settings.padding_top_desktop }}px;
      padding-bottom: {{ section.settings.padding_bottom_desktop }}px;
    }
  }

  .cci-{{ section.id }} .cci__container {
    max-width: var(--page-width);
    margin: 0 auto;
    padding: 0 1.5rem;
  }

  @media screen and (min-width: 750px) {
    .cci-{{ section.id }} .cci__container {
      padding: 0 5rem;
    }
  }

  .cci-{{ section.id }} .cci__header {
    text-align: center;
    max-width: 90rem;
    margin: 0 auto 2.8rem;
  }

  .cci-{{ section.id }} .cci__title {
    margin: 0;
    color: {{ section.settings.text_color }};
    font-size: {{ section.settings.title_size_mobile }}px;
    line-height: 1.2;
  }

  @media screen and (min-width: 750px) {
    .cci-{{ section.id }} .cci__title {
      font-size: {{ section.settings.title_size_desktop }}px;
    }
  }

  .cci-{{ section.id }} .cci__subtitle {
    margin: 0.8rem 0 0;
    color: {{ section.settings.text_color }};
    opacity: 0.95;
    font-size: {{ section.settings.subtitle_size }}px;
    line-height: 1.4;
  }

  .cci-{{ section.id }} .cci__body {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
    align-items: center;
  }

  @media screen and (min-width: 990px) {
    .cci-{{ section.id }} .cci__body {
      grid-template-columns: 1fr minmax(280px, {{ section.settings.image_width_desktop }}px);
      gap: 4rem;
    }

    .cci-{{ section.id }} .cci__body--image-left {
      grid-template-columns: minmax(280px, {{ section.settings.image_width_desktop }}px) 1fr;
    }

    .cci-{{ section.id }} .cci__body--image-left .cci__features { order: 2; }
    .cci-{{ section.id }} .cci__body--image-left .cci__image-wrap { order: 1; }
  }

  .cci-{{ section.id }} .cci__features {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    column-gap: {{ section.settings.column_gap_mobile }}px;
    row-gap: {{ section.settings.row_gap_mobile }}px;
  }

  @media screen and (min-width: 750px) {
    .cci-{{ section.id }} .cci__features {
      column-gap: {{ section.settings.column_gap_desktop }}px;
      row-gap: {{ section.settings.row_gap_desktop }}px;
    }
  }

  .cci-{{ section.id }} .cci__feature {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: 0.9rem;
  }

  .cci-{{ section.id }} .cci__icon {
    color: {{ section.settings.icon_color }};
    font-size: {{ section.settings.icon_size }}px;
    line-height: 1;
  }

  .cci-{{ section.id }} .cci__label {
    margin: 0;
    color: {{ section.settings.text_color }};
    font-size: {{ section.settings.feature_text_size }}px;
    line-height: 1.3;
    font-weight: 700;
  }

  .cci-{{ section.id }} .cci__image-wrap {
    position: relative;
  }

  .cci-{{ section.id }} .cci__image-rings {
    position: absolute;
    inset: 8% -10% 8% -10%;
    border: 1px dashed color-mix(in srgb, {{ section.settings.text_color }} 35%, transparent);
    border-radius: 999px;
    pointer-events: none;
  }

  .cci-{{ section.id }} .cci__image-rings::before {
    content: '';
    position: absolute;
    inset: 10%;
    border: 1px dashed color-mix(in srgb, {{ section.settings.text_color }} 28%, transparent);
    border-radius: 999px;
  }

  .cci-{{ section.id }} .cci__image {
    position: relative;
    z-index: 1;
    display: block;
    width: 100%;
    height: auto;
  }
{%- endstyle -%}

<div class="cci-{{ section.id }}">
  <div class="cci__container isolate">
    <div class="cci__header">
      {%- if section.settings.title != blank -%}
        <h2 class="cci__title inline-richtext">{{ section.settings.title }}</h2>
      {%- endif -%}
      {%- if section.settings.subtitle != blank -%}
        <div class="cci__subtitle">{{ section.settings.subtitle }}</div>
      {%- endif -%}
    </div>

    <div class="cci__body{% if section.settings.image_position == 'left' %} cci__body--image-left{% endif %}">
      <div class="cci__features">
        <div class="cci__feature">
          <span class="material-symbols-outlined cci__icon">{{ section.settings.icon_1 }}</span>
          <p class="cci__label">{{ section.settings.label_1 }}</p>
        </div>
        <div class="cci__feature">
          <span class="material-symbols-outlined cci__icon">{{ section.settings.icon_2 }}</span>
          <p class="cci__label">{{ section.settings.label_2 }}</p>
        </div>
        <div class="cci__feature">
          <span class="material-symbols-outlined cci__icon">{{ section.settings.icon_3 }}</span>
          <p class="cci__label">{{ section.settings.label_3 }}</p>
        </div>
        <div class="cci__feature">
          <span class="material-symbols-outlined cci__icon">{{ section.settings.icon_4 }}</span>
          <p class="cci__label">{{ section.settings.label_4 }}</p>
        </div>
      </div>

      <div class="cci__image-wrap">
        {%- if section.settings.show_rings -%}
          <div class="cci__image-rings"></div>
        {%- endif -%}
        {%- if section.settings.image != blank -%}
          {{ section.settings.image | image_url: width: 1400 | image_tag: loading: 'lazy', class: 'cci__image', widths: '360, 535, 750, 1070, 1250, 1400' }}
        {%- endif -%}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Columns Icons Image",
  "tag": "section",
  "class": "section",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    { "type": "header", "content": "Heading" },
    { "type": "inline_richtext", "id": "title", "label": "Title", "default": "Feel Better. Every Day." },
    { "type": "text", "id": "subtitle", "label": "Subtitle", "default": "From consistent heart support to easy daily use, hereâ€™s what makes your formula different." },
    { "type": "range", "id": "title_size_desktop", "min": 20, "max": 64, "step": 2, "unit": "px", "label": "Title size (desktop)", "default": 52 },
    { "type": "range", "id": "title_size_mobile", "min": 18, "max": 44, "step": 2, "unit": "px", "label": "Title size (mobile)", "default": 34 },
    { "type": "range", "id": "subtitle_size", "min": 12, "max": 30, "step": 1, "unit": "px", "label": "Subtitle size", "default": 18 },

    { "type": "header", "content": "Colors" },
    { "type": "color", "id": "bg_color_top", "label": "Background top", "default": "#a13a3f" },
    { "type": "color", "id": "bg_color_bottom", "label": "Background bottom", "default": "#8e0912" },
    { "type": "color", "id": "text_color", "label": "Text color", "default": "#ffffff" },
    { "type": "color", "id": "icon_color", "label": "Icon color", "default": "#ffffff" },

    { "type": "header", "content": "Icons & labels" },
    { "type": "text", "id": "icon_1", "label": "Icon 1 (Material symbol name)", "default": "ecg_heart" },
    { "type": "text", "id": "label_1", "label": "Label 1", "default": "Heart Health Support" },
    { "type": "text", "id": "icon_2", "label": "Icon 2 (Material symbol name)", "default": "health_and_safety" },
    { "type": "text", "id": "label_2", "label": "Label 2", "default": "Daily Immune Support" },
    { "type": "text", "id": "icon_3", "label": "Icon 3 (Material symbol name)", "default": "gastroenterology" },
    { "type": "text", "id": "label_3", "label": "Label 3", "default": "Gentle on the Stomach" },
    { "type": "text", "id": "icon_4", "label": "Icon 4 (Material symbol name)", "default": "experiment" },
    { "type": "text", "id": "label_4", "label": "Label 4", "default": "Third-Party Lab Tested" },
    { "type": "range", "id": "icon_size", "min": 20, "max": 72, "step": 2, "unit": "px", "label": "Icon size", "default": 52 },
    { "type": "range", "id": "feature_text_size", "min": 14, "max": 40, "step": 1, "unit": "px", "label": "Feature text size", "default": 18 },

    { "type": "header", "content": "Image" },
    { "type": "image_picker", "id": "image", "label": "Image" },
    { "type": "select", "id": "image_position", "label": "Image position (desktop)", "default": "right", "options": [
      { "value": "right", "label": "Right" },
      { "value": "left", "label": "Left" }
    ] },
    { "type": "range", "id": "image_width_desktop", "min": 280, "max": 900, "step": 10, "unit": "px", "label": "Image width (desktop)", "default": 560 },
    { "type": "checkbox", "id": "show_rings", "label": "Show dashed rings behind image", "default": true },

    { "type": "header", "content": "Spacing" },
    { "type": "range", "id": "column_gap_mobile", "min": 8, "max": 40, "step": 2, "unit": "px", "label": "Column gap (mobile)", "default": 20 },
    { "type": "range", "id": "row_gap_mobile", "min": 8, "max": 60, "step": 2, "unit": "px", "label": "Row gap (mobile)", "default": 30 },
    { "type": "range", "id": "column_gap_desktop", "min": 8, "max": 80, "step": 2, "unit": "px", "label": "Column gap (desktop)", "default": 40 },
    { "type": "range", "id": "row_gap_desktop", "min": 8, "max": 80, "step": 2, "unit": "px", "label": "Row gap (desktop)", "default": 40 },
    { "type": "range", "id": "padding_top_mobile", "min": 0, "max": 120, "step": 2, "unit": "px", "label": "Top padding (mobile)", "default": 27 },
    { "type": "range", "id": "padding_bottom_mobile", "min": 0, "max": 120, "step": 2, "unit": "px", "label": "Bottom padding (mobile)", "default": 0 },
    { "type": "range", "id": "padding_top_desktop", "min": 0, "max": 160, "step": 2, "unit": "px", "label": "Top padding (desktop)", "default": 36 },
    { "type": "range", "id": "padding_bottom_desktop", "min": 0, "max": 160, "step": 2, "unit": "px", "label": "Bottom padding (desktop)", "default": 0 }
  ],
  "presets": [
    {
      "name": "Columns Icons Image"
    }
  ]
}
{% endschema %}
