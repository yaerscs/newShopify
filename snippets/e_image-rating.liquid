{% comment %}
  Image Rating Snippet
  
  Parameters:
  - avatar_1: URL for the first avatar image
  - avatar_2: URL for the second avatar image
  - avatar_3: URL for the third avatar image
  - avatar_4: URL for the fourth avatar image
  - avatar_5: URL for the fifth avatar image
  - star_color: Color for the stars
  - rating_text: Text to display (ex: "Excellent")
  - rating_value: Numerical rating value (ex: 4.8)
  - text_color: Text color
  - value_color: Rating value color
  - margin_top: Top margin in pixels
  - margin_bottom: Bottom margin in pixels
  - block: Block object for Shopify block attributes
{% endcomment %}

{% assign avatar_1 = avatar_1 | default: block.settings.avatar_1 %}
{% assign avatar_2 = avatar_2 | default: block.settings.avatar_2 %}
{% assign avatar_3 = avatar_3 | default: block.settings.avatar_3 %}
{% assign avatar_4 = avatar_4 | default: block.settings.avatar_4 %}
{% assign avatar_5 = avatar_5 | default: block.settings.avatar_5 %}
{% assign star_color = star_color | default: block.settings.star_color %}
{% assign rating_text = rating_text | default: block.settings.rating_text %}
{% assign rating_value = rating_value | default: block.settings.rating_value %}
{% assign text_color = text_color | default: block.settings.text_color %}
{% assign value_color = value_color | default: block.settings.value_color %}
{% assign margin_top = margin_top | default: block.settings.margin_top %}
{% assign margin_bottom = margin_bottom | default: block.settings.margin_bottom %}

<div class="imgr-container" {{ block.shopify_attributes }} style="margin-top: {{ margin_top }}px; margin-bottom: {{ margin_bottom }}px;">
  <div class="imgr-avatar-group">
    {% if avatar_1 != blank %}
      <div class="imgr-avatar"><img src="{{ avatar_1 | img_url: '50x50', crop: 'center' }}" alt="User avatar 1"></div>
    {% endif %}
    {% if avatar_2 != blank %}
      <div class="imgr-avatar"><img src="{{ avatar_2 | img_url: '50x50', crop: 'center' }}" alt="User avatar 2"></div>
    {% endif %}
    {% if avatar_3 != blank %}
      <div class="imgr-avatar"><img src="{{ avatar_3 | img_url: '50x50', crop: 'center' }}" alt="User avatar 3"></div>
    {% endif %}
    {% if avatar_4 != blank %}
      <div class="imgr-avatar"><img src="{{ avatar_4 | img_url: '50x50', crop: 'center' }}" alt="User avatar 4"></div>
    {% endif %}
    {% if avatar_5 != blank %}
      <div class="imgr-avatar"><img src="{{ avatar_5 | img_url: '50x50', crop: 'center' }}" alt="User avatar 5"></div>
    {% endif %}
  </div>
  <div class="imgr-rating-text" style="color: {{ text_color }};">{{ rating_text }} <span class="imgr-rating-value" style="color: {{ value_color }};">{{ rating_value }}</span></div>
  <div class="imgr-stars">
    {% for i in (1..4) %}
      <svg class="imgr-star" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="color: {{ star_color }};">
        <path d="M11.5245 3.46353C11.6741 3.00287 12.3259 3.00287 12.4755 3.46353L14.1329 8.56434C14.1998 8.77035 14.3918 8.90983 14.6084 8.90983H19.9717C20.4561 8.90983 20.6575 9.52964 20.2656 9.81434L15.9266 12.9668C15.7514 13.0941 15.678 13.3198 15.745 13.5258L17.4023 18.6266C17.552 19.0873 17.0248 19.4704 16.6329 19.1857L12.2939 16.0332C12.1186 15.9059 11.8814 15.9059 11.7061 16.0332L7.3671 19.1857C6.97524 19.4704 6.448 19.0873 6.59768 18.6266L8.25503 13.5258C8.32197 13.3198 8.24864 13.0941 8.07339 12.9668L3.73438 9.81434C3.34253 9.52964 3.54392 8.90983 4.02828 8.90983H9.39159C9.6082 8.90983 9.80018 8.77035 9.86712 8.56434L11.5245 3.46353Z" fill="currentColor"/>
      </svg>
    {% endfor %}
    <!-- Half-filled star -->
    <div class="imgr-star-half-container">
      <!-- Full empty star as background -->
      <svg class="imgr-star" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="color: #e0e0e0; position: absolute;">
        <path d="M11.5245 3.46353C11.6741 3.00287 12.3259 3.00287 12.4755 3.46353L14.1329 8.56434C14.1998 8.77035 14.3918 8.90983 14.6084 8.90983H19.9717C20.4561 8.90983 20.6575 9.52964 20.2656 9.81434L15.9266 12.9668C15.7514 13.0941 15.678 13.3198 15.745 13.5258L17.4023 18.6266C17.552 19.0873 17.0248 19.4704 16.6329 19.1857L12.2939 16.0332C12.1186 15.9059 11.8814 15.9059 11.7061 16.0332L7.3671 19.1857C6.97524 19.4704 6.448 19.0873 6.59768 18.6266L8.25503 13.5258C8.32197 13.3198 8.24864 13.0941 8.07339 12.9668L3.73438 9.81434C3.34253 9.52964 3.54392 8.90983 4.02828 8.90983H9.39159C9.6082 8.90983 9.80018 8.77035 9.86712 8.56434L11.5245 3.46353Z" fill="currentColor"/>
      </svg>
      
      <!-- Left half filled star -->
      <div class="imgr-star-half-wrapper" style="position: absolute; width: 50%; height: 100%; overflow: hidden;">
        <svg class="imgr-star" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="color: {{ star_color }}; position: absolute;">
          <path d="M11.5245 3.46353C11.6741 3.00287 12.3259 3.00287 12.4755 3.46353L14.1329 8.56434C14.1998 8.77035 14.3918 8.90983 14.6084 8.90983H19.9717C20.4561 8.90983 20.6575 9.52964 20.2656 9.81434L15.9266 12.9668C15.7514 13.0941 15.678 13.3198 15.745 13.5258L17.4023 18.6266C17.552 19.0873 17.0248 19.4704 16.6329 19.1857L12.2939 16.0332C12.1186 15.9059 11.8814 15.9059 11.7061 16.0332L7.3671 19.1857C6.97524 19.4704 6.448 19.0873 6.59768 18.6266L8.25503 13.5258C8.32197 13.3198 8.24864 13.0941 8.07339 12.9668L3.73438 9.81434C3.34253 9.52964 3.54392 8.90983 4.02828 8.90983H9.39159C9.6082 8.90983 9.80018 8.77035 9.86712 8.56434L11.5245 3.46353Z" fill="currentColor"/>
        </svg>
      </div>
    </div>
  </div>
</div>

<style>
  .imgr-container {
    display: flex;
    align-items: center;
    max-width: 350px;
    position: relative;
    z-index: 1;
  }
  
  .imgr-avatar-group {
    display: flex;
    margin-right: 12px;
    align-items: center;
  }
  
  .imgr-avatar {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    border: 1.5px solid white;
    margin-right: -10px;
    overflow: hidden;
    position: relative;
  }
  
  .imgr-avatar:nth-child(1) { z-index: 5; }
  .imgr-avatar:nth-child(2) { z-index: 4; }
  .imgr-avatar:nth-child(3) { z-index: 3; }
  .imgr-avatar:nth-child(4) { z-index: 2; }
  .imgr-avatar:nth-child(5) { z-index: 1; }
  
  .imgr-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  .imgr-rating-text {
    font-size: 14px;
    font-weight: var(--font-weight-semibold);
    margin-right: 12px;
    margin-left: 4px;
    line-height: 1;
    display: flex;
    align-items: center;
  }
  
  .imgr-rating-value {
    font-weight: var(--font-weight-regular);
    margin-left: 3px;
  }
  
  .imgr-stars {
    display: flex;
    align-items: center;
  }
  
  .imgr-star {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
    margin-right: -5px;
  }
  
  .imgr-star-half-container {
    position: relative;
    width: 20px;
    height: 20px;
    flex-shrink: 0;
    margin-right: -5px;
  }
  
  .imgr-star-half-wrapper {
    position: absolute;
    top: 0;
    left: 0;
    width: 50%;
    height: 100%;
    overflow: hidden;
  }
  
  /* Mobile styling - 82.5% scale (increased by 10% from previous 75% scale) */
  @media screen and (max-width: 767px) {
    .imgr-container {
      max-width: 289px; /* 350px * 0.825 */
    }
    
    .imgr-avatar-group {
      margin-right: 10px; /* 12px * 0.825 */
    }
    
    .imgr-avatar {
      width: 20px; /* 24px * 0.825 */
      height: 20px; /* 24px * 0.825 */
      border: 1px solid white;
      margin-right: -8px; /* -10px * 0.825 */
    }
    
    .imgr-rating-text {
      font-size: 12px; /* 14px * 0.825 */
      margin-right: 3px; /* 12px * 0.825 */
      margin-left: 3px; /* 4px * 0.825 */
    }
    
    .imgr-star, 
    .imgr-star-half-container {
      width: 16.5px; /* 20px * 0.825 */
      height: 16.5px; /* 20px * 0.825 */
      margin-right: -4px; /* -5px * 0.825 */
    }
  }
</style> 